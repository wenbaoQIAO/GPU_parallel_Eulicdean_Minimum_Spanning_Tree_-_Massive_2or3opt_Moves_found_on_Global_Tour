<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Application template: Cross-compilation de windows vers ARM V6 (raspberry pi)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Application template
   &#160;<span id="projectnumber">version 1.1</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Recherche" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Recherche');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_cross.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Tout</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Espaces de nommage</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Fichiers</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Fonctions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Définitions de type</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Énumérations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Valeurs énumérées</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Amis</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groupes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Cross-compilation de windows vers ARM V6 (raspberry pi) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>compilation standard avec IDE QT : mettre shadow build au niveau externe immediat :<ul>
<li>application_template/build-lib-Desktop-Release</li>
<li>application_template/build-test-Desktop-Release</li>
</ul>
</li>
<li>chaine de cross-compilation Windows vers Raspberry Pi<ul>
<li>Installer le cross-compilateur SysGCC (arm-linux-gnueabihf) sous Windows</li>
<li>Telecharger de <a href="http://gnutoolchains.com/raspberry/">http://gnutoolchains.com/raspberry/</a></li>
<li>Compiler Qt sous Windows pour raspberry pi : qmake, QtCore et QtXml. Ces trois composants sont suffisants pour la compilation et cross compilation a la fois sous raspberry et sous windows (cross-compilation). L'utilitaire qmake compile sur chaque platforme, permet la generation des Makefile appropries a partir des projets Qt d'extension .pro.</li>
</ul>
</li>
<li>generation d'une version de Qt precompilee pour cross-compilation de windows vers raspberry pi :<ul>
<li>qt-everywhere-opensource-src-4.8.4_rasp</li>
</ul>
</li>
<li>directives et option de compilation :<ul>
<li>Configuration QT avant compilation (generation des Makefile) : configure -release -static -platform win32-g++ -xplatform linux-arm-gnueabi-g++ -no-3dnow -opengl desktop -nomake examples -nomake tests -no-webkit</li>
<li>Mettre -no-qmake en cas de reconfigurations successives</li>
<li>Modification Makefile avant compilation (selon module corelib, xml) : -DQT_ARCH_ARMV6</li>
<li>Lancement make : mingw32-make</li>
<li>Pour compilation croisee mettre la variable d'environnement QMAKESPEC a la valeur linux-arm-gnueabi-g++</li>
</ul>
</li>
<li>tutoriels (utiles pour compilation de Qt sous raspberry pi):<ul>
<li>tutoriel installation QT 5 sous raspberry : <a href="http://qt-project.org/wiki/Native_Build_of_Qt5_on_a_Raspberry_Pi">http://qt-project.org/wiki/Native_Build_of_Qt5_on_a_Raspberry_Pi</a></li>
<li>tutoriel cross-compilation Qt vers raspberry (linux-linux) : <a href="https://debian-facile.org/topic-8425-comment-cross-compiler-qt-pour-du-arm-page-1.html">https://debian-facile.org/topic-8425-comment-cross-compiler-qt-pour-du-arm-page-1.html</a></li>
</ul>
</li>
<li>modification des fichiers projets lib.pro, test.pro, pour qmake et cross-compilation<ul>
<li>pour la cross-compilation de Windows vers Linux Raspberry pi, mettre la variable d'environnement QMAKESPEC a linux-arm-gnueabi-g++, choix du Qt prealablement cross-compile pour Raspberry Pi et choix compilateur arm-linux-gnueabihf-g++.exe (chaine cross-compilation SysGCC)</li>
<li>permet de compiler directement sur Raspberry Pi (qmake, make) faire CONFIG += arm</li>
<li>permet de compiler avec CGAL (uniquement avec QMAKESPEC en win32-msvc2010), faire CONFIG += cgal</li>
</ul>
</li>
<li>compilation croisee par ligne de commande avec console windows<ul>
<li>pour lancer et initialiser une console : creer un raccourci de CommandPrompt avec Cible=COMSPEC% /k "C:\Qt\qt..._rasp\bin\qtvars.bat vsvars" et faire demarrer dans application/lib par exemple (le script qtvars.bat positionne QMAKESPEC=linux-arm-gnueabi-g++ et la variable Path)</li>
<li>aller dans /lib</li>
<li>supprimer .o et Makefile</li>
<li>taper qmake (celui du dossier QT rasp est execute) : genere le Makefile a partir du lib.pro</li>
<li>taper mingw32-make : compile et genere la librairie liblibApplication.so.1.0.0</li>
<li>copier liblibApplication.so.1.0.0 dans bin/liblibApplication.so manuellement a cause d'une erreur Makefile (commande "mv")</li>
<li>pour le programme appelant /test/main.c aller dans /test</li>
<li>supprimer .o et Makefile</li>
<li>taper qmake</li>
<li>taper mingw32-make</li>
</ul>
</li>
</ul>
<p>L'executable "application" est genere dans le repertoire /bin.</p>
<p>Pour executer sur la machine cible, il suffit alors de transferer l'executable "application" et la librairie liblibApplication.so sur le raspberry pi, dans les repertoires appropries. Verifier les dependances avec la commande "ldd application". Tenir compte des extensions ".so", "so.1". Verifier la presence des modules Qt (QtCore, QtXml) sur le rapberry. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Généré le Mercredi 14 Janvier 2015 16:38:38 pour Application template par
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
